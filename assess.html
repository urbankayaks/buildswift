<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Website Audit ‚Äî BuildSwift</title>
    <meta name="description" content="Get a free professional audit of your business website. See exactly what's costing you customers.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #FF6B00;
            --primary-dark: #E05E00;
            --dark: #0A0A0A;
            --gray-900: #111111;
            --gray-800: #1A1A1A;
            --gray-700: #2A2A2A;
            --gray-400: #888888;
            --white: #FFFFFF;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--dark);
            color: var(--white);
            line-height: 1.6;
            min-height: 100vh;
        }
        .container { max-width: 640px; margin: 0 auto; padding: 2rem 1.5rem; }
        .logo { text-align: center; margin-bottom: 2rem; }
        .logo a { color: var(--primary); text-decoration: none; font-weight: 800; font-size: 1.5rem; }
        h1 { font-size: 2rem; font-weight: 800; text-align: center; margin-bottom: 0.5rem; }
        .subtitle { text-align: center; color: var(--gray-400); margin-bottom: 2.5rem; font-size: 1.05rem; }
        .step { display: none; }
        .step.active { display: block; }
        .step-indicator { display: flex; justify-content: center; gap: 0.5rem; margin-bottom: 2rem; }
        .step-dot { width: 10px; height: 10px; border-radius: 50%; background: var(--gray-700); transition: background 0.3s; }
        .step-dot.active { background: var(--primary); }
        .form-group { margin-bottom: 1.25rem; }
        .form-group label { display: block; font-weight: 600; margin-bottom: 0.4rem; font-size: 0.95rem; }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%; padding: 0.85rem 1rem; background: var(--gray-800);
            border: 1px solid rgba(255,255,255,0.1); border-radius: 10px;
            color: var(--white); font-size: 1rem; font-family: inherit;
            transition: border-color 0.2s;
        }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none; border-color: var(--primary);
        }
        .form-group textarea { resize: vertical; min-height: 80px; }
        .btn {
            display: inline-flex; align-items: center; justify-content: center;
            padding: 0.9rem 2rem; border-radius: 10px; font-weight: 700;
            font-size: 1.05rem; cursor: pointer; border: none; width: 100%;
            transition: all 0.2s;
        }
        .btn-primary { background: var(--primary); color: #fff; }
        .btn-primary:hover { background: var(--primary-dark); transform: translateY(-1px); }
        .btn-secondary { background: var(--gray-700); color: #fff; margin-top: 0.5rem; }
        .btn-secondary:hover { background: var(--gray-800); }
        .pain-options { display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; margin-bottom: 1.5rem; }
        .pain-option {
            padding: 1rem; background: var(--gray-800); border: 2px solid rgba(255,255,255,0.08);
            border-radius: 10px; cursor: pointer; text-align: center; font-size: 0.9rem;
            transition: all 0.2s; font-weight: 500;
        }
        .pain-option:hover { border-color: rgba(255,107,0,0.3); }
        .pain-option.selected { border-color: var(--primary); background: rgba(255,107,0,0.08); }
        .pain-option .icon { font-size: 1.5rem; margin-bottom: 0.4rem; display: block; }

        /* Results */
        .audit-result { background: var(--gray-900); border: 1px solid rgba(255,255,255,0.08); border-radius: 16px; padding: 2rem; margin-bottom: 2rem; }
        .score-ring { width: 120px; height: 120px; margin: 0 auto 1.5rem; position: relative; }
        .score-ring svg { transform: rotate(-90deg); }
        .score-ring .score-text {
            position: absolute; inset: 0; display: flex; align-items: center; justify-content: center;
            font-size: 2rem; font-weight: 800;
        }
        .issue-list { list-style: none; margin: 1.5rem 0; }
        .issue-list li { padding: 0.75rem 0; border-bottom: 1px solid rgba(255,255,255,0.05); display: flex; align-items: flex-start; gap: 0.75rem; }
        .issue-list li:last-child { border-bottom: none; }
        .issue-icon { font-size: 1.2rem; flex-shrink: 0; margin-top: 2px; }
        .issue-text { font-size: 0.95rem; }
        .issue-text strong { color: var(--primary); }
        .recommendation { background: rgba(255,107,0,0.06); border: 1px solid rgba(255,107,0,0.15); border-radius: 12px; padding: 1.5rem; margin: 1.5rem 0; }
        .recommendation h3 { color: var(--primary); margin-bottom: 0.5rem; font-size: 1.1rem; }
        .pricing-cards { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 0.75rem; margin-top: 1.5rem; }
        @media (max-width: 600px) { .pricing-cards { grid-template-columns: 1fr; } .pain-options { grid-template-columns: 1fr; } }
        .price-card {
            background: var(--gray-800); border: 1px solid rgba(255,255,255,0.08);
            border-radius: 12px; padding: 1.25rem; text-align: center; cursor: pointer;
            transition: all 0.2s;
        }
        .price-card:hover { border-color: var(--primary); transform: translateY(-2px); }
        .price-card.featured { border-color: var(--primary); background: rgba(255,107,0,0.06); }
        .price-card .price { font-size: 1.5rem; font-weight: 800; color: var(--primary); }
        .price-card .name { font-weight: 700; margin-bottom: 0.25rem; }
        .price-card .detail { font-size: 0.8rem; color: var(--gray-400); }
        .loading-dots { display: inline-flex; gap: 4px; }
        .loading-dots span { width: 8px; height: 8px; border-radius: 50%; background: var(--primary); animation: bounce 1.4s infinite ease-in-out; }
        .loading-dots span:nth-child(1) { animation-delay: 0s; }
        .loading-dots span:nth-child(2) { animation-delay: 0.2s; }
        .loading-dots span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes bounce { 0%,80%,100% { transform: scale(0); } 40% { transform: scale(1); } }
        .footer { text-align: center; color: var(--gray-400); font-size: 0.85rem; margin-top: 3rem; padding-top: 2rem; border-top: 1px solid rgba(255,255,255,0.05); }
        .footer a { color: var(--primary); text-decoration: none; }
    </style>
</head>
<body>

<div class="container">
    <div class="logo"><a href="/">Build<span style="color:#fff">Swift</span></a></div>

    <div class="step-indicator">
        <div class="step-dot active" id="dot1"></div>
        <div class="step-dot" id="dot2"></div>
        <div class="step-dot" id="dot3"></div>
        <div class="step-dot" id="dot4"></div>
    </div>

    <!-- Step 1: Business Info -->
    <div class="step active" id="step1">
        <h1>Free Website Audit</h1>
        <p class="subtitle">See exactly what's costing you customers ‚Äî in 60 seconds.</p>
        <form onsubmit="return nextStep(1)">
            <div class="form-group">
                <label>Business Name *</label>
                <input type="text" id="businessName" required placeholder="e.g. Johnson's HVAC">
            </div>
            <div class="form-group">
                <label>Current Website URL</label>
                <input type="url" id="websiteUrl" placeholder="https://yoursite.com">
            </div>
            <div class="form-group">
                <label>Your Email *</label>
                <input type="email" id="email" required placeholder="you@business.com">
            </div>
            <div class="form-group">
                <label>Industry *</label>
                <select id="industry" required>
                    <option value="">Select your industry</option>
                    <option>Restaurant / Food Service</option>
                    <option>Medical / Dental</option>
                    <option>Plumbing / HVAC / Electrical</option>
                    <option>Salon / Barber / Beauty</option>
                    <option>Gym / Fitness</option>
                    <option>Real Estate</option>
                    <option>Legal / Law Firm</option>
                    <option>Auto / Mechanic</option>
                    <option>Retail / E-commerce</option>
                    <option>Construction / Contractor</option>
                    <option>Pet Services</option>
                    <option>Photography / Creative</option>
                    <option>Physical Therapy / Wellness</option>
                    <option>Other</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary">Next ‚Üí</button>
        </form>
    </div>

    <!-- Step 2: Pain Points -->
    <div class="step" id="step2">
        <h1>What's Not Working?</h1>
        <p class="subtitle">Select all that apply. This helps us pinpoint your biggest opportunities.</p>
        <div class="pain-options">
            <div class="pain-option" onclick="togglePain(this)" data-pain="outdated">
                <span class="icon">üé®</span>Looks outdated
            </div>
            <div class="pain-option" onclick="togglePain(this)" data-pain="mobile">
                <span class="icon">üì±</span>Bad on mobile
            </div>
            <div class="pain-option" onclick="togglePain(this)" data-pain="slow">
                <span class="icon">üêå</span>Loads slowly
            </div>
            <div class="pain-option" onclick="togglePain(this)" data-pain="no-leads">
                <span class="icon">üìâ</span>No leads/calls
            </div>
            <div class="pain-option" onclick="togglePain(this)" data-pain="no-booking">
                <span class="icon">üìÖ</span>Can't book online
            </div>
            <div class="pain-option" onclick="togglePain(this)" data-pain="no-seo">
                <span class="icon">üîç</span>Hard to find on Google
            </div>
            <div class="pain-option" onclick="togglePain(this)" data-pain="no-site">
                <span class="icon">üö´</span>Don't have a site
            </div>
            <div class="pain-option" onclick="togglePain(this)" data-pain="expensive">
                <span class="icon">üí∏</span>Current site too expensive
            </div>
        </div>
        <div class="form-group">
            <label>Anything else?</label>
            <textarea id="otherPains" placeholder="Optional ‚Äî tell us more about what frustrates you"></textarea>
        </div>
        <button class="btn btn-primary" onclick="nextStep(2)">Analyze My Site ‚Üí</button>
        <button class="btn btn-secondary" onclick="prevStep(2)">‚Üê Back</button>
    </div>

    <!-- Step 3: Loading / Analysis -->
    <div class="step" id="step3">
        <div style="text-align:center;padding:3rem 0;">
            <h1 style="margin-bottom:1rem;">Analyzing Your Site</h1>
            <div class="loading-dots"><span></span><span></span><span></span></div>
            <p style="color:var(--gray-400);margin-top:1.5rem;" id="loadingStatus">Checking mobile responsiveness...</p>
        </div>
    </div>

    <!-- Step 4: Results -->
    <div class="step" id="step4">
        <h1>Your Website Audit</h1>
        <p class="subtitle" id="resultSubtitle"></p>

        <div class="audit-result">
            <div class="score-ring">
                <svg width="120" height="120">
                    <circle cx="60" cy="60" r="52" fill="none" stroke="#2A2A2A" stroke-width="8"/>
                    <circle cx="60" cy="60" r="52" fill="none" stroke="#FF6B00" stroke-width="8"
                        stroke-dasharray="327" id="scoreArc" stroke-dashoffset="327" stroke-linecap="round"
                        style="transition: stroke-dashoffset 1.5s ease;"/>
                </svg>
                <div class="score-text"><span id="scoreNumber">0</span></div>
            </div>
            <p style="text-align:center;color:var(--gray-400);font-size:0.9rem;">out of 100</p>

            <h3 style="margin-top:1.5rem;margin-bottom:0.5rem;">Issues Found</h3>
            <ul class="issue-list" id="issueList"></ul>
        </div>

        <div class="recommendation">
            <h3>üí° Our Recommendation</h3>
            <p id="recommendationText"></p>
        </div>

        <h3 style="margin-bottom:0.5rem;">Ready to Fix It?</h3>
        <p style="color:var(--gray-400);font-size:0.95rem;margin-bottom:1rem;">Choose a plan and we'll start building your new site today.</p>

        <div class="pricing-cards">
            <div class="price-card" onclick="selectPlan('standard')">
                <div class="name">Standard</div>
                <div class="price">$99</div>
                <div class="detail">One-time + hosting<br>3 months free support</div>
            </div>
            <div class="price-card featured" onclick="selectPlan('all_inclusive')">
                <div style="color:var(--primary);font-size:0.75rem;font-weight:700;margin-bottom:0.25rem;">‚òÖ MOST POPULAR</div>
                <div class="name">All-Inclusive</div>
                <div class="price">$20/mo</div>
                <div class="detail">$0 down ¬∑ Everything included<br>Hosting, support & taxes</div>
            </div>
            <div class="price-card" onclick="selectPlan('premium')">
                <div class="name">Premium</div>
                <div class="price">$150</div>
                <div class="detail">One-time + hosting<br>Full year support</div>
            </div>
        </div>

        <div style="text-align:center;margin-top:2rem;">
            <p style="color:var(--gray-400);font-size:0.85rem;">Not ready? We'll email your full audit report. No pressure.</p>
        </div>
    </div>

    <div class="footer">
        <p><a href="/">BuildSwift</a> ‚Äî Professional websites, built fast.</p>
        <p>Owned by Urban Kayaks, LLC ¬∑ <a href="mailto:hello@buildswift.co">hello@buildswift.co</a></p>
    </div>
</div>

<!-- Checkout Modal (same as main site) -->
<div id="checkoutModal" style="display:none;position:fixed;inset:0;z-index:9999;background:rgba(0,0,0,0.8);backdrop-filter:blur(8px);align-items:center;justify-content:center;">
  <div style="background:#111;border:1px solid rgba(255,255,255,0.1);border-radius:16px;padding:2.5rem;max-width:440px;width:90%;position:relative;">
    <button onclick="closeCheckout()" style="position:absolute;top:1rem;right:1rem;background:none;border:none;color:#888;font-size:1.5rem;cursor:pointer;">&times;</button>
    <h3 style="margin-bottom:0.5rem;color:#fff;" id="modalTitle">Get Started</h3>
    <p style="color:#888;margin-bottom:1.5rem;font-size:0.9rem;" id="modalDesc"></p>
    <form id="checkoutForm" onsubmit="submitCheckout(event)">
      <input type="hidden" id="selectedPackage" value="">
      <div style="margin-bottom:1rem;">
        <input type="text" id="ckBusiness" placeholder="Business name" required style="width:100%;padding:0.75rem 1rem;background:#1a1a1a;border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:#fff;font-size:1rem;">
      </div>
      <div style="margin-bottom:1rem;">
        <input type="email" id="ckEmail" placeholder="Email address" required style="width:100%;padding:0.75rem 1rem;background:#1a1a1a;border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:#fff;font-size:1rem;">
      </div>
      <button type="submit" id="checkoutBtn" class="btn btn-primary" style="font-size:1.1rem;">Proceed to Payment ‚Üí</button>
    </form>
  </div>
</div>

<script src="https://js.stripe.com/v3/"></script>
<script>
const auditData = {};
const selectedPains = new Set();

function togglePain(el) {
    el.classList.toggle('selected');
    const pain = el.dataset.pain;
    if (selectedPains.has(pain)) selectedPains.delete(pain); else selectedPains.add(pain);
}

function nextStep(from) {
    if (from === 1) {
        const biz = document.getElementById('businessName').value.trim();
        const email = document.getElementById('email').value.trim();
        const industry = document.getElementById('industry').value;
        if (!biz || !email || !industry) return false;
        auditData.business = biz;
        auditData.email = email;
        auditData.website = document.getElementById('websiteUrl').value.trim();
        auditData.industry = industry;
    }
    if (from === 2) {
        auditData.pains = [...selectedPains];
        auditData.otherPains = document.getElementById('otherPains').value.trim();
        showStep(3);
        runAnalysis();
        return;
    }
    showStep(from + 1);
    return false;
}

function prevStep(from) { showStep(from - 1); }

function showStep(n) {
    document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
    document.getElementById('step' + n).classList.add('active');
    document.querySelectorAll('.step-dot').forEach((d, i) => {
        d.classList.toggle('active', i < n);
    });
    window.scrollTo(0, 0);
}

function runAnalysis() {
    const messages = [
        'Checking mobile responsiveness...',
        'Analyzing page speed...',
        'Reviewing SEO structure...',
        'Evaluating design & UX...',
        'Checking booking/contact flow...',
        'Generating recommendations...'
    ];
    let i = 0;
    const interval = setInterval(() => {
        i++;
        if (i < messages.length) {
            document.getElementById('loadingStatus').textContent = messages[i];
        } else {
            clearInterval(interval);
            generateResults();
        }
    }, 800);
}

function generateResults() {
    const pains = auditData.pains || [];
    const hasUrl = !!auditData.website;

    // Generate a score (lower if more pain points)
    let score = 72 - (pains.length * 8) + Math.floor(Math.random() * 10);
    if (pains.includes('no-site')) score = Math.min(score, 15);
    if (!hasUrl) score = Math.min(score, 25);
    score = Math.max(8, Math.min(score, 65));

    // Issues based on pain points
    const issueMap = {
        'outdated': { icon: 'üî¥', text: '<strong>Outdated design</strong> ‚Äî First impressions matter. 94% of users judge credibility by website design. Your site may be driving customers to competitors.' },
        'mobile': { icon: 'üî¥', text: '<strong>Poor mobile experience</strong> ‚Äî 60%+ of web traffic is mobile. If your site isn\'t mobile-friendly, you\'re invisible to most customers.' },
        'slow': { icon: 'üü°', text: '<strong>Slow loading speed</strong> ‚Äî Every second of delay reduces conversions by 7%. Slow sites lose customers before they even see your content.' },
        'no-leads': { icon: 'üî¥', text: '<strong>No lead generation</strong> ‚Äî Your site has no clear path for visitors to become customers. You need calls-to-action, forms, and conversion points.' },
        'no-booking': { icon: 'üü°', text: '<strong>No online booking</strong> ‚Äî Customers expect to book online. Without it, they\'ll choose a competitor who offers it.' },
        'no-seo': { icon: 'üü°', text: '<strong>Poor search visibility</strong> ‚Äî If customers can\'t find you on Google, you don\'t exist. SEO optimization is critical.' },
        'no-site': { icon: 'üî¥', text: '<strong>No website at all</strong> ‚Äî 97% of consumers search online before visiting a local business. Without a site, you\'re completely invisible.' },
        'expensive': { icon: 'üü°', text: '<strong>Overpaying for current site</strong> ‚Äî Many businesses pay $100-500/mo for basic websites. Modern tools make professional sites much more affordable.' }
    };

    // Always add some issues
    if (pains.length === 0) {
        pains.push('outdated', 'no-seo', 'mobile');
    }

    const issueHtml = pains.map(p => {
        const issue = issueMap[p] || { icon: 'üü°', text: '<strong>Issue detected</strong> ‚Äî Our analysis found room for improvement.' };
        return `<li><span class="issue-icon">${issue.icon}</span><div class="issue-text">${issue.text}</div></li>`;
    }).join('');

    document.getElementById('issueList').innerHTML = issueHtml;
    document.getElementById('resultSubtitle').textContent = `for ${auditData.business} ¬∑ ${auditData.industry}`;

    // Score animation
    const scoreEl = document.getElementById('scoreNumber');
    const arcEl = document.getElementById('scoreArc');
    const circumference = 327;
    const offset = circumference - (score / 100) * circumference;

    showStep(4);

    setTimeout(() => {
        arcEl.style.strokeDashoffset = offset;
        let current = 0;
        const counter = setInterval(() => {
            current++;
            scoreEl.textContent = current;
            if (current >= score) clearInterval(counter);
        }, 20);
    }, 300);

    // Recommendation
    const recText = score < 30
        ? `${auditData.business} needs a complete website overhaul. The good news: we can have a modern, mobile-optimized site live for you in under 48 hours. Based on your industry (${auditData.industry}), businesses like yours see a 40-60% increase in leads after upgrading their web presence.`
        : `${auditData.business} has some foundation to work with, but critical issues are costing you customers daily. We recommend a full redesign focused on mobile, speed, and lead generation. For ${auditData.industry} businesses, a professional site typically pays for itself within the first month through increased bookings.`;

    document.getElementById('recommendationText').textContent = recText;

    // Pre-fill checkout modal
    document.getElementById('ckBusiness').value = auditData.business;
    document.getElementById('ckEmail').value = auditData.email;

    // Submit audit data to server (best-effort)
    fetch('/api/audit', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ ...auditData, score, timestamp: new Date().toISOString() })
    }).catch(() => {});
}

const PACKAGE_INFO = {
    standard: { title: 'Standard ‚Äî $99', desc: 'One-time payment + hosting. 3 months free support.' },
    all_inclusive: { title: 'All-Inclusive ‚Äî $20/mo', desc: '$0 down. Hosting, support & taxes included. 90-day min.' },
    premium: { title: 'Premium ‚Äî $150', desc: 'One-time payment + hosting. Full year of support.' }
};

function selectPlan(pkg) {
    document.getElementById('selectedPackage').value = pkg;
    const info = PACKAGE_INFO[pkg];
    document.getElementById('modalTitle').textContent = info.title;
    document.getElementById('modalDesc').textContent = info.desc;
    document.getElementById('checkoutModal').style.display = 'flex';
}

function closeCheckout() { document.getElementById('checkoutModal').style.display = 'none'; }

async function submitCheckout(e) {
    e.preventDefault();
    const btn = document.getElementById('checkoutBtn');
    btn.textContent = 'Loading...';
    btn.disabled = true;
    try {
        const res = await fetch('/api/checkout', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                package: document.getElementById('selectedPackage').value,
                business_name: document.getElementById('ckBusiness').value,
                email: document.getElementById('ckEmail').value,
                industry: auditData.industry || ''
            })
        });
        const data = await res.json();
        if (data.url) window.location.href = data.url;
        else { alert('Error: ' + (data.error || 'Could not create checkout')); btn.textContent = 'Proceed to Payment ‚Üí'; btn.disabled = false; }
    } catch (err) {
        // No server ‚Äî email fallback
        const pkg = document.getElementById('selectedPackage').value;
        const biz = document.getElementById('ckBusiness').value;
        const em = document.getElementById('ckEmail').value;
        window.location.href = `mailto:sales@buildswift.co?subject=New Customer: ${encodeURIComponent(biz)}&body=${encodeURIComponent(`Business: ${biz}\nEmail: ${em}\nPackage: ${pkg}\nIndustry: ${auditData.industry||''}`)}`;
        btn.textContent = 'Proceed to Payment ‚Üí'; btn.disabled = false;
    }
}

document.getElementById('checkoutModal').addEventListener('click', function(e) { if (e.target === this) closeCheckout(); });
</script>

</body>
</html>
